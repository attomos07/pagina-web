<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Attomos</title>

        <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="32x32" href="/static/images/attomos-favicon.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/static/images/attomos-favicon.png">

    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
    <link rel="stylesheet" href="/static/css/checkout.css">
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <!-- Main Checkout Container -->
    <div class="checkout-container">
        <!-- Left Side - Payment Form -->
        <div class="payment-section">
            <!-- Logo Header Animado DENTRO del formulario -->
            <header class="checkout-header">
                <div class="logo-container">
                    <h1>ATTMOS</h1>
                    <svg id="svg">
                        <circle id="base" />
                        <path id="ring" />
                        <path id="second" />
                        <path id="third" />
                    </svg>
                </div>
            </header>

            <div class="payment-header">
                <h2 class="payment-title">InformaciÃ³n de Pago</h2>
            </div>

            <form id="paymentForm" class="payment-form">
                <!-- Billing Information -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="lni lni-user"></i>
                        InformaciÃ³n de FacturaciÃ³n
                    </h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Nombre Completo *</label>
                            <input type="text" class="form-input" id="fullName" required>
                            <small class="input-hint">Juan PÃ©rez</small>
                            <div class="error-message"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Email *</label>
                            <input type="email" class="form-input" id="email" required>
                            <small class="input-hint"><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f49e81959ab4919e919984989bda979b99">[email&#160;protected]</a></small>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">TelÃ©fono</label>
                            <div class="phone-input-wrapper">
                                <input type="text" class="phone-code-input" id="phoneCode" readonly>
                                <input type="tel" class="form-input phone-number-input" id="phone">
                            </div>
                            <small class="input-hint">6621234567</small>
                            <div class="error-message"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">CompaÃ±Ã­a *</label>
                            <input type="text" class="form-input" id="compania" placeholder="Mi Empresa SA" required>
                            <small class="input-hint">Nombre de tu empresa</small>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">DirecciÃ³n *</label>
                            <input type="text" class="form-input" id="direccion" placeholder="Calle Ejemplo 123, Col. Centro" required>
                            <small class="input-hint">Tu direcciÃ³n de contacto</small>
                            <div class="error-message"></div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">PaÃ­s *</label>
                            <div class="custom-select-wrapper country-select-wrapper">
                                <input type="text" 
                                       id="country" 
                                       name="country" 
                                       class="form-input form-select" 
                                       value="ðŸ‡²ðŸ‡½ MÃ©xico"
                                       readonly
                                       required>
                                <i class="lni lni-chevron-down select-arrow"></i>
                                <div class="select-dropdown" id="countryDropdown">
                                    <div class="select-options-container" id="countryOptionsContainer">
                                        <div class="select-option" data-value="MX" data-flag="ðŸ‡²ðŸ‡½" data-code="+52" data-name="MÃ©xico">
                                            <span class="country-flag">ðŸ‡²ðŸ‡½</span>
                                            <span>MÃ©xico</span>
                                        </div>
                                        <div class="select-option" data-value="US" data-flag="ðŸ‡ºðŸ‡¸" data-code="+1" data-name="Estados Unidos">
                                            <span class="country-flag">ðŸ‡ºðŸ‡¸</span>
                                            <span>Estados Unidos</span>
                                        </div>
                                        <div class="select-option" data-value="CA" data-flag="ðŸ‡¨ðŸ‡¦" data-code="+1" data-name="CanadÃ¡">
                                            <span class="country-flag">ðŸ‡¨ðŸ‡¦</span>
                                            <span>CanadÃ¡</span>
                                        </div>
                                        <div class="select-option" data-value="ES" data-flag="ðŸ‡ªðŸ‡¸" data-code="+34" data-name="EspaÃ±a">
                                            <span class="country-flag">ðŸ‡ªðŸ‡¸</span>
                                            <span>EspaÃ±a</span>
                                        </div>
                                        <div class="select-option" data-value="AR" data-flag="ðŸ‡¦ðŸ‡·" data-code="+54" data-name="Argentina">
                                            <span class="country-flag">ðŸ‡¦ðŸ‡·</span>
                                            <span>Argentina</span>
                                        </div>
                                        <div class="select-option" data-value="CO" data-flag="ðŸ‡¨ðŸ‡´" data-code="+57" data-name="Colombia">
                                            <span class="country-flag">ðŸ‡¨ðŸ‡´</span>
                                            <span>Colombia</span>
                                        </div>
                                        <div class="select-option" data-value="CL" data-flag="ðŸ‡¨ðŸ‡±" data-code="+56" data-name="Chile">
                                            <span class="country-flag">ðŸ‡¨ðŸ‡±</span>
                                            <span>Chile</span>
                                        </div>
                                        <div class="select-option" data-value="PE" data-flag="ðŸ‡µðŸ‡ª" data-code="+51" data-name="PerÃº">
                                            <span class="country-flag">ðŸ‡µðŸ‡ª</span>
                                            <span>PerÃº</span>
                                        </div>
                                    </div>
                                </div>
                                <input type="hidden" id="countryCode" value="MX">
                            </div>
                            <small class="input-hint">Selecciona tu paÃ­s</small>
                            <div class="error-message"></div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">CÃ³digo Postal *</label>
                            <input type="text" class="form-input" id="postalCode" required>
                            <small class="input-hint">83000</small>
                            <div class="error-message"></div>
                        </div>
                    </div>
                </div>

                <!-- FacturaciÃ³n -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="lni lni-invoice"></i>
                        FacturaciÃ³n
                    </h3>

                    <div class="form-group invoice-toggle-group">
                        <label class="invoice-checkbox-label">
                            <input type="checkbox" id="requiresInvoice">
                            <span class="checkbox-custom"></span>
                            <span>Â¿Requieres Factura?</span>
                        </label>
                    </div>

                    <div id="billingFields" style="display:none;">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">RazÃ³n Social *</label>
                                <input type="text" class="form-input" id="razonSocial" placeholder="Nombre o RazÃ³n Social">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">RFC *</label>
                                <input type="text" class="form-input" id="rfc" placeholder="XAXX010101000" maxlength="13" style="text-transform:uppercase;">
                                <div class="error-message"></div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group" style="grid-column: 1 / -1;">
                                <label class="form-label">DirecciÃ³n Fiscal *</label>
                                <textarea class="form-input" id="direccionFiscal" placeholder="Calle, NÃºmero, Colonia, Municipio, Estado" style="min-height:80px; resize:vertical;"></textarea>
                                <div class="error-message"></div>
                            </div>
                        </div>

                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">CÃ³digo Postal *</label>
                                <input type="text" class="form-input" id="codigoPostal" placeholder="83000" maxlength="5">
                                <div class="error-message"></div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email para Factura *</label>
                                <input type="email" class="form-input" id="emailFactura" placeholder="facturacion@empresa.com">
                                <div class="error-message"></div>
                            </div>
                        </div>

                        <!-- Uso CFDI -->
                        <div class="form-group">
                            <label class="form-label">Uso del CFDI *</label>
                            <div class="cfdi-select-wrapper">
                                <div class="cfdi-select-trigger" id="usoCfdi-trigger" tabindex="0">
                                    <span id="usoCfdi-selected">Seleccionar uso</span>
                                    <i class="lni lni-chevron-down"></i>
                                </div>
                                <div class="cfdi-select-dropdown" id="usoCfdi-dropdown">
                                    <div class="cfdi-option" data-value="">Seleccionar uso</div>
                                    <div class="cfdi-option" data-value="G01">G01 â€“ AdquisiciÃ³n de mercancÃ­as</div>
                                    <div class="cfdi-option" data-value="G02">G02 â€“ Devoluciones, descuentos o bonificaciones</div>
                                    <div class="cfdi-option" data-value="G03">G03 â€“ Gastos en general</div>
                                    <div class="cfdi-option" data-value="I01">I01 â€“ Construcciones</div>
                                    <div class="cfdi-option" data-value="I02">I02 â€“ Mobiliario y equipo de oficina</div>
                                    <div class="cfdi-option" data-value="I03">I03 â€“ Equipo de transporte</div>
                                    <div class="cfdi-option" data-value="I04">I04 â€“ Equipo de cÃ³mputo y accesorios</div>
                                    <div class="cfdi-option" data-value="I08">I08 â€“ Otra maquinaria y equipo</div>
                                    <div class="cfdi-option" data-value="S01">S01 â€“ Sin efectos fiscales</div>
                                </div>
                                <input type="hidden" id="usoCfdi" value="">
                            </div>
                            <div class="error-message" id="usoCfdi-error"></div>
                        </div>

                        <!-- RÃ©gimen Fiscal -->
                        <div class="form-group">
                            <label class="form-label">RÃ©gimen Fiscal *</label>
                            <div class="cfdi-select-wrapper">
                                <div class="cfdi-select-trigger" id="regimenFiscal-trigger" tabindex="0">
                                    <span id="regimenFiscal-selected">Seleccionar rÃ©gimen</span>
                                    <i class="lni lni-chevron-down"></i>
                                </div>
                                <div class="cfdi-select-dropdown" id="regimenFiscal-dropdown">
                                    <div class="cfdi-option" data-value="">Seleccionar rÃ©gimen</div>
                                    <div class="cfdi-option" data-value="601">601 â€“ General de Ley Personas Morales</div>
                                    <div class="cfdi-option" data-value="603">603 â€“ Personas Morales con Fines no Lucrativos</div>
                                    <div class="cfdi-option" data-value="605">605 â€“ Sueldos y Salarios e Ingresos Asimilados</div>
                                    <div class="cfdi-option" data-value="606">606 â€“ Arrendamiento</div>
                                    <div class="cfdi-option" data-value="612">612 â€“ Personas FÃ­sicas con Actividades Empresariales</div>
                                    <div class="cfdi-option" data-value="616">616 â€“ Sin obligaciones fiscales</div>
                                    <div class="cfdi-option" data-value="621">621 â€“ IncorporaciÃ³n Fiscal</div>
                                    <div class="cfdi-option" data-value="625">625 â€“ Actividades a travÃ©s de Plataformas TecnolÃ³gicas</div>
                                    <div class="cfdi-option" data-value="626">626 â€“ RÃ©gimen Simplificado de Confianza (RESICO)</div>
                                </div>
                                <input type="hidden" id="regimenFiscal" value="">
                            </div>
                            <div class="error-message" id="regimenFiscal-error"></div>
                        </div>

                        <div class="billing-info-notice">
                            <i class="lni lni-information"></i>
                            <div>
                                <p>La factura tarda <strong>3 dÃ­as hÃ¡biles</strong> en ser emitida.</p>
                                <p>Â¿Dudas? ContÃ¡ctanos por WhatsApp.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Method -->
                <div class="form-section">
                    <h3 class="section-title">
                        <i class="lni lni-credit-cards"></i>
                        MÃ©todo de Pago
                    </h3>

                    <div class="payment-method-selector">
                        <label class="payment-method-option active">
                            <input type="radio" name="paymentMethod" value="card" checked>
                            <div class="method-content">
                                <i class="lni lni-credit-cards"></i>
                                <span>Tarjeta de CrÃ©dito/DÃ©bito</span>
                            </div>
                        </label>
                        <label class="payment-method-option">
                            <input type="radio" name="paymentMethod" value="paypal">
                            <div class="method-content">
                                <i class="lni lni-paypal"></i>
                                <span>PayPal</span>
                            </div>
                        </label>
                    </div>

                    <!-- Card Details with Stripe Elements -->
                    <div id="cardDetails" class="card-details">
                        <div class="stripe-container" id="stripe-container">
                            <div id="card-element"></div>
                        </div>
                        <div class="error-message" id="card-errors"></div>
                    </div>

                    <!-- PayPal Option -->
                    <div id="paypalDetails" class="paypal-details" style="display: none;">
                        <div class="paypal-info">
                            <i class="lni lni-paypal" style="font-size: 3rem; color: #0070ba;"></i>
                            <p>SerÃ¡s redirigido a PayPal para completar tu pago de forma segura.</p>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn-submit" id="submitButton" disabled>
                    <i class="lni lni-lock"></i>
                    <span>Realizar Pago Seguro</span>
                </button>

                <!-- Cancel Link -->
                <a href="/plans" class="cancel-link">
                    <i class="lni lni-arrow-left"></i>
                    Volver a Planes
                </a>

                <!-- Security Badges al final -->
                <div class="payment-security-badges">
                    <div class="security-badge-item">
                        <i class="lni lni-lock"></i>
                        <span>Pago 100% seguro</span>
                    </div>
                    <div class="security-badge-item">
                        <i class="lni lni-shield"></i>
                        <span>Cifrado SSL</span>
                    </div>
                    <div class="security-badge-item">
                        <i class="lni lni-certificate"></i>
                        <span>Powered by Stripe</span>
                    </div>
                </div>
            </form>
        </div>

        <!-- Right Side - Order Summary -->
        <div class="order-summary">
            <div class="summary-header">
                <h2 class="summary-title">
                    <i class="lni lni-cart"></i>
                    Resumen de Compra
                </h2>
            </div>

            <!-- Selected Plan Card -->
            <div class="selected-plan-card">
                <div class="plan-badge">Plan Seleccionado</div>
                <h3 class="plan-name" id="selectedPlanName">Plan NeutrÃ³n</h3>
                <div class="plan-billing-period">
                    <span class="billing-label">PerÃ­odo de facturaciÃ³n:</span>
                    <span class="billing-value" id="billingPeriod">Mensual</span>
                </div>
            </div>

            <!-- CupÃ³n de Descuento -->
            <div class="coupon-section">
                <div class="coupon-header">
                    <i class="lni lni-tag"></i>
                    <span>Â¿Tienes un cupÃ³n?</span>
                </div>
                <div id="coupon-input-container">
                    <div class="coupon-input-row">
                        <input type="text" class="coupon-input" id="coupon-code" placeholder="CÃ³digo de descuento" maxlength="50">
                        <button type="button" id="apply-coupon" class="btn-coupon">
                            <i class="lni lni-checkmark"></i>
                            Aplicar
                        </button>
                    </div>
                    <div class="coupon-result" id="coupon-result" style="display:none;"></div>
                </div>
                <div id="discount-breakdown" style="display:none;">
                    <div class="coupon-applied-badge">
                        <div class="coupon-applied-info">
                            <i class="lni lni-checkmark-circle"></i>
                            <span id="coupon-name">CupÃ³n aplicado</span>
                        </div>
                        <button type="button" id="remove-coupon" class="btn-remove-coupon">
                            <i class="lni lni-close"></i> Quitar
                        </button>
                    </div>
                </div>
            </div>

            <!-- Price Breakdown -->
            <div class="price-breakdown">
                <div class="price-item">
                    <span class="price-label">Subtotal</span>
                    <span class="price-value" id="subtotal">$255.00</span>
                </div>
                <div class="price-item" id="discount-line" style="display:none;">
                    <span class="price-label" style="color:#10b981;">Descuento</span>
                    <span class="price-value" id="discount-summary" style="color:#10b981;">-$0.00</span>
                </div>
                <div class="price-item">
                    <span class="price-label">IVA (16%)</span>
                    <span class="price-value" id="tax">$40.80</span>
                </div>
                <div class="price-separator"></div>
                <div class="price-item total">
                    <span class="price-label">Total a Pagar</span>
                    <span class="price-value" id="total">$295.80</span>
                </div>
            </div>

            <!-- Features Included -->
            <div class="features-included">
                <h4 class="features-title">Incluye:</h4>
                <ul class="features-list" id="planFeatures">
                    <li>
                        <i class="lni lni-checkmark-circle"></i>
                        <span>3 Chatbots incluidos</span>
                    </li>
                    <li>
                        <i class="lni lni-checkmark-circle"></i>
                        <span>10,000 mensajes/mes</span>
                    </li>
                    <li>
                        <i class="lni lni-checkmark-circle"></i>
                        <span>Todas las plataformas</span>
                    </li>
                    <li>
                        <i class="lni lni-checkmark-circle"></i>
                        <span>Soporte prioritario</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Processing Modal -->
    <div id="processingModal" class="modal-overlay">
        <div class="modal-content">
            <div class="processing-animation">
                <div class="spinner"></div>
            </div>
            <h3 class="processing-title">Procesando tu pago...</h3>
            <p class="processing-text">Por favor espera, no cierres esta ventana.</p>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="modal-overlay">
        <div class="modal-content success-modal">
            <div class="success-icon">
                <i class="lni lni-checkmark-circle"></i>
            </div>
            <h3 class="success-title">Â¡Pago Exitoso!</h3>
            <p class="success-text">Tu suscripciÃ³n ha sido activada correctamente.</p>
            <button class="btn-success" onclick="window.location.href='/dashboard'">
                Ir al Dashboard
            </button>
        </div>
    </div>

    <script src="/static/js/checkout.js"></script>
</body>
</html>